# CSV 데이터 임포트 가이드

## CSV 파일 형식

CSV 파일은 다음 형식을 따라야 합니다:

```csv
gender,age,category,measured_value
M,25,벤치프레스,80.5
F,30,악력,35.2
M,20,허리둘레,75.0
```

### 컬럼 설명

- **gender**: 성별 (`M` 또는 `F`)
- **age**: 나이 (정수)
- **category**: 측정 항목 이름 또는 ID
  - 이름으로 입력: `벤치프레스`, `악력`, `허리둘레` 등 (test_categories 테이블에 존재해야 함)
  - ID로 입력: `1`, `2`, `3` 등
- **measured_value**: 측정값 (소수점 가능)

## 사용 방법

### 1. CSV 파일 준비

CSV 파일을 프로젝트 루트 또는 원하는 위치에 저장합니다.

### 2. 측정 항목(test_categories) 확인

임포트하기 전에 `test_categories` 테이블에 측정 항목이 등록되어 있어야 합니다.
CSV에서 카테고리 이름을 사용하는 경우, 해당 이름이 테이블에 존재해야 합니다.

### 3. 임포트 실행

```bash
# 방법 1: 명령줄 인자로 파일 경로 지정
npm run import:csv ./data/public_data.csv

# 방법 2: 환경 변수로 파일 경로 지정
CSV_FILE_PATH=./data/public_data.csv npm run import:csv

# 방법 3: 기본 경로 사용 (./data/public_data.csv)
npm run import:csv
```

## 주의사항

- 대용량 파일(6만 줄)의 경우 처리에 시간이 걸릴 수 있습니다.
- 배치 크기는 1000개로 설정되어 있어 성능이 최적화되어 있습니다.
- 에러가 발생한 레코드는 건너뛰고 계속 진행됩니다.
- 진행 상황이 실시간으로 표시됩니다.

## 에러 처리

스크립트는 다음 경우에 에러를 발생시킵니다:

- 잘못된 성별 값 (M 또는 F가 아닌 경우)
- 잘못된 나이 값 (숫자가 아니거나 범위를 벗어난 경우)
- 존재하지 않는 측정 항목
- 잘못된 측정값 (숫자가 아닌 경우)

에러가 발생한 레코드는 건너뛰고 나머지 데이터는 계속 처리됩니다.
